<section class="py-16 bg-green-50">
  <div class="max-w-6xl mx-auto px-4">
    <div class="text-center mb-12 animate-on-scroll animate-hidden">
      <h2 class="text-3xl md:text-4xl font-bold text-green-800 mb-4">
        Customer Favorites
      </h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Explore our most-loved healthy meals. Each dish is crafted with fresh ingredients 
        and balanced nutrition in mind.
      </p>
    </div>

    <!-- Carousel Container -->
    <div class="relative carousel-container">
      <!-- Navigation Arrows -->
      <button (click)="prevSlide()"
              (mouseenter)="stopAutoSlide()"
              (mouseleave)="startAutoSlide()"
              class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 md:-translate-x-8
                     w-12 h-12 bg-white rounded-full shadow-lg flex items-center 
                     justify-center hover:bg-green-50 transition-all duration-300
                     border border-gray-200 z-10 hover:scale-110">
        <svg class="w-6 h-6 text-green-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>

      <button (click)="nextSlide()"
              (mouseenter)="stopAutoSlide()"
              (mouseleave)="startAutoSlide()"
              class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 md:translate-x-8
                     w-12 h-12 bg-white rounded-full shadow-lg flex items-center 
                     justify-center hover:bg-green-50 transition-all duration-300
                     border border-gray-200 z-10 hover:scale-110">
        <svg class="w-6 h-6 text-green-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </button>

      <!-- Products Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
           [class.slide-in-right]="activeSlideIndex() > 0"
           [class.slide-in-left]="activeSlideIndex() === 0">
        
        @for (product of getVisibleProducts(); track product.id) {
          <div class="product-card bg-white rounded-2xl shadow-lg hover:shadow-xl 
                      transition-all duration-300 overflow-hidden border 
                      border-gray-100 h-full flex flex-col">
            
            <!-- Product Image -->
            <div class="relative overflow-hidden h-48">
              <img [src]="product.image"
                   [alt]="product.name"
                   class="w-full h-full object-cover transition-transform 
                          duration-500 hover:scale-110">
              
              <!-- Category Badge -->
              <div class="absolute top-3 left-3">
                <span class="text-xs font-semibold px-3 py-1 rounded-full"
                      [ngClass]="getCategoryColor(product.category)">
                  {{ product.category }}
                </span>
              </div>
              
              <!-- Rating -->
              <div class="absolute top-3 right-3 bg-white/90 backdrop-blur-sm 
                          px-2 py-1 rounded-full flex items-center gap-1">
                <span class="text-yellow-500 text-sm">★</span>
                <span class="text-sm font-bold text-gray-800">{{ product.rating }}</span>
              </div>
            </div>

            <!-- Product Details -->
            <div class="p-6 flex flex-col flex-1">
              <h3 class="text-xl font-bold text-gray-800 mb-2">
                {{ product.name }}
              </h3>
              
              <p class="text-gray-600 text-sm mb-4 flex-1">
                {{ product.description }}
              </p>
              
              <!-- Tags -->
              <div class="flex flex-wrap gap-2 mb-4">
                @for (tag of product.tags.slice(0, 2); track tag) {
                  <span class="text-xs bg-green-50 text-green-700 px-2 py-1 
                               rounded-full border border-green-100">
                    {{ tag }}
                  </span>
                }
              </div>
              
              <!-- Price & Action -->
              <div class="flex items-center justify-between mt-auto pt-4 
                          border-t border-gray-100">
                <div>
                  <p class="text-sm text-gray-500">Starting at</p>
                  <p class="text-2xl font-bold text-green-700">₹{{ product.price }}</p>
                </div>
                <button [routerLink]="['/menu']"
                        class="px-4 py-2 bg-green-600 text-white rounded-lg 
                               hover:bg-green-700 transition-colors font-medium
                               flex items-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                          d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                  </svg>
                  Add
                </button>
              </div>
            </div>
          </div>
        }
      </div>

      <!-- Carousel Indicators -->
      <div class="flex justify-center gap-3 mt-8">
        @for (slide of [].constructor(totalSlides); track $index; let i = $index) {
          <button (click)="goToSlide(i)"
                  (mouseenter)="stopAutoSlide()"
                  (mouseleave)="startAutoSlide()"
                  class="w-12 h-2 rounded-full transition-all duration-300"
                  [class]="activeSlideIndex() === i 
                    ? 'bg-green-600' 
                    : 'bg-gray-300 hover:bg-gray-400'"
                  [attr.aria-label]="'Go to slide ' + (i + 1)">
          </button>
        }
      </div>
    </div>

    <!-- View All Button -->
    <div class="text-center mt-10">
      <a routerLink="/menu"
         class="inline-flex items-center gap-2 px-6 py-3 border-2 border-green-600 
                text-green-700 font-semibold rounded-xl hover:bg-green-50 
                transition-colors duration-300">
        View Full Menu
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M14 5l7 7m0 0l-7 7m7-7H3"/>
        </svg>
      </a>
    </div>
  </div>
</section>